<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Capture like 'Google Feedback' using 'html2canvas' | neko2me.github.io</title>
<meta name="generator" content="Jekyll v3.7.3.1" />
<meta property="og:title" content="Capture like 'Google Feedback' using 'html2canvas'" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://neko2me.github.io/sample/h2c/" />
<meta property="og:url" content="https://neko2me.github.io/sample/h2c/" />
<meta property="og:site_name" content="neko2me.github.io" />
<script type="application/ld+json">
{"@type":"WebPage","headline":"Capture like 'Google Feedback' using 'html2canvas'","url":"https://neko2me.github.io/sample/h2c/","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link rel="stylesheet" href="/assets/css/style.css?v=007c286158968976171e422ae3dc9227d8a72e5b">





  <script type="text/javascript" src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <style type="text/css">
    .content {
      z-index: 0;
    }
    .exec-btn, .ok-btn {
        position: fixed;
        right: 2em;
        bottom: 2em;
        border: none;
        background-color: darkorange;
        color: white;
        border-radius: 50%;
        width: 4em;
        height: 4em;
        box-shadow: 3px 3px 6px 0px silver;
    }
    .exec-btn {
        z-index: 1;
    }
    .screenshot {
        z-index: 2;
        position: absolute;
    }
    .ok-btn {
        z-index: 3;
    }
    .result-bg {
        width: 100%;
        height: 100%;
        background-color: #00000069;
        left: 0;
        top: 0;
        position: fixed;
        z-index: 4;
    }
    .result {
        width: 50%;
        position: absolute;
        left: 0;
        right: 0;
        margin: auto;
        top: 0;
        bottom: 0;
    }
    .selector {
        position: absolute;
        left: 0;
        top: 0;
    }
  </style>
  <script type="text/javascript">
    function h2c() {
        var content = document.getElementById("content");
        html2canvas(content).then(canvas => {
            var ss = document.getElementById("screenshot");
            ss.appendChild(canvas);
            initSelector(canvas);
            
            ss.style.display = "";
            content.style.display = "none";
            document.getElementById("execButton").style.display = "none";
            document.getElementById("okButton").style.display = "";
        });
    }
    function c2i() {
        var ss = document.getElementById("screenshot");
        var canvas = ss.firstChild;
        var selector = ss.lastChild;
        document.getElementById("result").src = canvas.toDataURL();
        
        ss.removeChild(canvas);
        ss.removeChild(selector);
        ss.style.display = "none";
        document.getElementById("okButton").style.display = "none";
        document.getElementById("resultBg").style.display = "";
    }
    function iClose() {
        document.getElementById("resultBg").style.display = "none";
        document.getElementById("execButton").style.display = "";
        document.getElementById("content").style.display = "";
    }
    
    function initSelector(screenshot){
        var selector = document.createElement("canvas");
        with (selector) {
            width = screenshot.width;
            height = screenshot.height;
            className = "selector";
            style.zIndex = (screenshot.style.zIndex || 0) + 1;
        }
        
        buildSelector(selector).selectEnd = function(r) {
            with (screenshot.getContext("2d")) {
                fillStyle = "#ffeb3ba1";
                fillRect(r.sx, r.sy, r.ex, r.ey);
            }
        }
        
        screenshot.parentElement.appendChild(selector);
    }
    function buildSelector(canvas) {
        var context = canvas.getContext("2d");
        with (context) {
            setLineDash([6, 3]);
            strokeStyle = "#3e3e3ecf";
        }
        
        context.rect = {
            sx: 0, sy: 0, ex: 0, ey: 0, dirty: false
        };
        context.selectStarted = false;
        context.clear = function(dirty) {
            this.rect.dirty = dirty;
            this.clearRect(0, 0, this.canvas.clientWidth, this.canvas.clientHeight);
        }
        context.select = function() {
            this.clear(true);
            this.strokeRect(this.rect.sx, this.rect.sy, this.rect.ex, this.rect.ey);
        }
        context.selectEnd = null;

        canvas.addEventListener("mousedown", function (e) {
            context.rect.sx = e.pageX;
            context.rect.sy = e.pageY;
            context.selectStarted = true;
        }, false);
        canvas.addEventListener("mousemove", function (e) {
            if (!context.selectStarted) return;
            context.rect.ex = e.pageX - context.rect.sx;
            context.rect.ey = e.pageY - context.rect.sy;
            context.select();
        }, false);
        canvas.addEventListener("mouseup", function onMouseUp (e) {
            if (context.rect.dirty) {
                context.clear(false);
                if (context.selectEnd) context.selectEnd(context.rect);
            }
            context.selectStarted = false;
        }, false);
        
        return context;
    }
  </script>





  </head>
  <body>
<div id="content" class="content" style="display:block;">
  <h1><a href="https://www.neko2me.net/2018/09/html2canvasgooglefeedback.html">Description is here</a></h1>
  <section class="page-header">
  <h1 class="project-name">neko2me.github.io</h1>
  <h2 class="project-tagline"></h2>
  </section>
  <section class="main-content">
  <h2 id="welcome-to-github-pages">Welcome to GitHub Pages</h2>
  <p>You can use the <a href="https://github.com/neko2me/neko2me.github.io/edit/master/index.md">editor on GitHub</a> to maintain and preview the content for your website in Markdown files.</p>
  <p>Whenever you commit to this repository, GitHub Pages will run <a href="https://jekyllrb.com/">Jekyll</a> to rebuild the pages in your site, from the content in your Markdown files.</p>
  <h3 id="markdown">Markdown</h3>
  <p>Markdown is a lightweight and easy-to-use syntax for styling your writing. It includes conventions for</p>
  <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Syntax highlighted code block
  <span class="gh"># Header 1</span>
  <span class="gu">## Header 2</span>
  <span class="gu">### Header 3</span>
  <span class="p">
  -</span> Bulleted
  <span class="p">-</span> List
  <span class="p">
  1.</span> Numbered
  <span class="p">2.</span> List
  <span class="gs">**Bold**</span> and _Italic_ and <span class="sb">`Code`</span> text
  <span class="p">[</span><span class="nv">Link</span><span class="p">](</span><span class="sx">url</span><span class="p">)</span> and !<span class="p">[</span><span class="nv">Image</span><span class="p">](</span><span class="sx">src</span><span class="p">)</span>
  </code></pre></div></div>
  <p>For more details see <a href="https://guides.github.com/features/mastering-markdown/">GitHub Flavored Markdown</a>.</p>
  <h3 id="jekyll-themes">Jekyll Themes</h3>
  <p>Your Pages site will use the layout and styles from the Jekyll theme you have selected in your <a href="https://github.com/neko2me/neko2me.github.io/settings">repository settings</a>. The name of this theme is saved in the Jekyll <code class="highlighter-rouge">_config.yml</code> configuration file.</p>
  <h3 id="support-or-contact">Support or Contact</h3>
  <p>Having trouble with Pages? Check out our <a href="https://help.github.com/categories/github-pages-basics/">documentation</a> or <a href="https://github.com/contact">contact support</a> and we窶冤l help you sort it out.</p>
  <footer class="site-footer">
  <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
  </footer>
  </section>
</div>

<button id="execButton" class="exec-btn" onclick="h2c();"><img src="camera.svg"/></button>
<div id="screenshot" class="screenshot" style="display:none;"></div>
<button id="okButton" class="ok-btn" onclick="c2i();" style="display:none;"><img src="done.svg"/></button>
<div id="resultBg" class="result-bg" onclick="iClose();" style="display:none;"><img id="result" class="result"/></div>

  </body>
</html>
